(this["webpackJsonptemplate-redux"]=this["webpackJsonptemplate-redux"]||[]).push([[0],{26:function(e,t,a){},38:function(e){e.exports=JSON.parse('[{"Headline":{"EffectiveDate":"2021-09-13T20:00:00+03:00","EffectiveEpochDate":1631552400,"Severity":7,"Text":"Very warm Monday night","Category":"heat","EndDate":"2021-09-14T08:00:00+03:00","EndEpochDate":1631595600,"MobileLink":"http://www.accuweather.com/en/il/tel-aviv/215854/daily-weather-forecast/215854?lang=en-us","Link":"http://www.accuweather.com/en/il/tel-aviv/215854/daily-weather-forecast/215854?lang=en-us"},"DailyForecasts":[{"Date":"2021-09-13T07:00:00+03:00","EpochDate":1631505600,"Temperature":{"Minimum":{"Value":81,"Unit":"F","UnitType":18},"Maximum":{"Value":89,"Unit":"F","UnitType":18}},"Day":{"Icon":1,"IconPhrase":"Sunny","HasPrecipitation":false},"Night":{"Icon":33,"IconPhrase":"Clear","HasPrecipitation":false},"Sources":["AccuWeather"],"MobileLink":"http://www.accuweather.com/en/il/tel-aviv/215854/daily-weather-forecast/215854?day=1&lang=en-us","Link":"http://www.accuweather.com/en/il/tel-aviv/215854/daily-weather-forecast/215854?day=1&lang=en-us"},{"Date":"2021-09-14T07:00:00+03:00","EpochDate":1631592000,"Temperature":{"Minimum":{"Value":79,"Unit":"F","UnitType":18},"Maximum":{"Value":87,"Unit":"F","UnitType":18}},"Day":{"Icon":2,"IconPhrase":"Mostly sunny","HasPrecipitation":false},"Night":{"Icon":34,"IconPhrase":"Mostly clear","HasPrecipitation":false},"Sources":["AccuWeather"],"MobileLink":"http://www.accuweather.com/en/il/tel-aviv/215854/daily-weather-forecast/215854?day=2&lang=en-us","Link":"http://www.accuweather.com/en/il/tel-aviv/215854/daily-weather-forecast/215854?day=2&lang=en-us"},{"Date":"2021-09-15T07:00:00+03:00","EpochDate":1631678400,"Temperature":{"Minimum":{"Value":82,"Unit":"F","UnitType":18},"Maximum":{"Value":87,"Unit":"F","UnitType":18}},"Day":{"Icon":2,"IconPhrase":"Mostly sunny","HasPrecipitation":false},"Night":{"Icon":34,"IconPhrase":"Mostly clear","HasPrecipitation":false},"Sources":["AccuWeather"],"MobileLink":"http://www.accuweather.com/en/il/tel-aviv/215854/daily-weather-forecast/215854?day=3&lang=en-us","Link":"http://www.accuweather.com/en/il/tel-aviv/215854/daily-weather-forecast/215854?day=3&lang=en-us"},{"Date":"2021-09-16T07:00:00+03:00","EpochDate":1631764800,"Temperature":{"Minimum":{"Value":80,"Unit":"F","UnitType":18},"Maximum":{"Value":86,"Unit":"F","UnitType":18}},"Day":{"Icon":2,"IconPhrase":"Mostly sunny","HasPrecipitation":false},"Night":{"Icon":34,"IconPhrase":"Mostly clear","HasPrecipitation":false},"Sources":["AccuWeather"],"MobileLink":"http://www.accuweather.com/en/il/tel-aviv/215854/daily-weather-forecast/215854?day=4&lang=en-us","Link":"http://www.accuweather.com/en/il/tel-aviv/215854/daily-weather-forecast/215854?day=4&lang=en-us"},{"Date":"2021-09-17T07:00:00+03:00","EpochDate":1631851200,"Temperature":{"Minimum":{"Value":81,"Unit":"F","UnitType":18},"Maximum":{"Value":85,"Unit":"F","UnitType":18}},"Day":{"Icon":3,"IconPhrase":"Partly sunny","HasPrecipitation":false},"Night":{"Icon":34,"IconPhrase":"Mostly clear","HasPrecipitation":false},"Sources":["AccuWeather"],"MobileLink":"http://www.accuweather.com/en/il/tel-aviv/215854/daily-weather-forecast/215854?day=5&lang=en-us","Link":"http://www.accuweather.com/en/il/tel-aviv/215854/daily-weather-forecast/215854?day=5&lang=en-us"}]}]')},39:function(e){e.exports=JSON.parse('[{"Version":1,"Key":"215854","Type":"City","Rank":31,"LocalizedName":"Tel Aviv","Country":{"ID":"IL","LocalizedName":"Israel"},"AdministrativeArea":{"ID":"TA","LocalizedName":"Tel Aviv"}},{"Version":1,"Key":"328328","Type":"City","Rank":10,"LocalizedName":"London","Country":{"ID":"GB","LocalizedName":"United Kingdom"},"AdministrativeArea":{"ID":"LND","LocalizedName":"London"}},{"Version":1,"Key":"55489","Type":"City","Rank":35,"LocalizedName":"London","Country":{"ID":"CA","LocalizedName":"Canada"},"AdministrativeArea":{"ID":"ON","LocalizedName":"Ontario"}},{"Version":1,"Key":"329139","Type":"City","Rank":41,"LocalizedName":"Londonderry","Country":{"ID":"GB","LocalizedName":"United Kingdom"},"AdministrativeArea":{"ID":"DRS","LocalizedName":"Derry City and Strabane"}},{"Version":1,"Key":"2174076","Type":"City","Rank":65,"LocalizedName":"Londonderry","Country":{"ID":"US","LocalizedName":"United States"},"AdministrativeArea":{"ID":"NH","LocalizedName":"New Hampshire"}},{"Version":1,"Key":"711822","Type":"City","Rank":75,"LocalizedName":"London Colney","Country":{"ID":"GB","LocalizedName":"United Kingdom"},"AdministrativeArea":{"ID":"HRT","LocalizedName":"Hertfordshire"}},{"Version":1,"Key":"333298","Type":"City","Rank":75,"LocalizedName":"London","Country":{"ID":"US","LocalizedName":"United States"},"AdministrativeArea":{"ID":"KY","LocalizedName":"Kentucky"}},{"Version":1,"Key":"335012","Type":"City","Rank":75,"LocalizedName":"London","Country":{"ID":"US","LocalizedName":"United States"},"AdministrativeArea":{"ID":"OH","LocalizedName":"Ohio"}},{"Version":1,"Key":"2523034","Type":"City","Rank":85,"LocalizedName":"London Apprentice","Country":{"ID":"GB","LocalizedName":"United Kingdom"},"AdministrativeArea":{"ID":"CON","LocalizedName":"Cornwall"}},{"Version":1,"Key":"2123173","Type":"City","Rank":85,"LocalizedName":"London","Country":{"ID":"US","LocalizedName":"United States"},"AdministrativeArea":{"ID":"AR","LocalizedName":"Arkansas"}},{"Version":1,"Key":"2154402","Type":"City","Rank":85,"LocalizedName":"London","Country":{"ID":"US","LocalizedName":"United States"},"AdministrativeArea":{"ID":"CA","LocalizedName":"California"}}]')},40:function(e){e.exports=JSON.parse('[{"LocalObservationDateTime":"2021-09-13T10:20:00+03:00","EpochTime":1631517600,"WeatherText":"Sunny","WeatherIcon":1,"HasPrecipitation":false,"PrecipitationType":null,"IsDayTime":true,"Temperature":{"Metric":{"Value":29.5,"Unit":"C","UnitType":17},"Imperial":{"Value":85,"Unit":"F","UnitType":18}},"MobileLink":"http://www.accuweather.com/en/il/tel-aviv/215854/current-weather/215854?lang=en-us","Link":"http://www.accuweather.com/en/il/tel-aviv/215854/current-weather/215854?lang=en-us"}]')},53:function(e,t,a){},78:function(e,t,a){},81:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(20),i=a.n(r),o=a(14),s=a(3),l=a(12),u=(a(52),a(53),a(6)),d=a.n(u),m=a(13),h="SET_FORECAST",p="SET_SEARCH_RESULTS",j="SET_LIKES_ONLOAD",f="MANAGE_FAVORITE",b="SET_TEMP_UNIT",y=a(15),v=a(38),O=a(39),x=a(40),w=(a(55),"tPldUTKSv7z2ARd48H295HMusATWIkEP"),N="http://dataservice.accuweather.com/",g={loadForecast:function(){var e=Object(m.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return N.concat("forecasts/v1/daily/5day/",t),{apikey:w},e.prev=2,a=Object(y.a)(v),e.abrupt("return",a[0]);case 7:return e.prev=7,e.t0=e.catch(2),e.abrupt("return",e.t0);case 10:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t){return e.apply(this,arguments)}}(),loadLocations:function(){var e=Object(m.a)(d.a.mark((function e(t){var a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return N.concat("locations/v1/cities/autocomplete/"),{apikey:w,q:t},e.prev=2,a=Object(y.a)(O),n=a.filter((function(e){return e.LocalizedName.includes(t)})),e.abrupt("return",n);case 8:return e.prev=8,e.t0=e.catch(2),e.abrupt("return",e.t0);case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}(),loadCurrentData:function(e){return Object(y.a)(x)},convertTempToCelsius:function(e){return 5/9*(e-32)}},L=function(){try{return localStorage.getItem("likes")?JSON.parse(localStorage.getItem("likes")):[]}catch(e){}},T=a(1),S={changeTempUnit:function(e){return function(t){try{t({type:b,payload:e})}catch(a){console.log("Couldn't change temp unit")}}}},k=Object(l.b)(null,S)((function(e){var t=e.changeTempUnit;return Object(T.jsx)("nav",{className:"navbar navbar-expand-lg navbar-light mb-4 shadow",style:{backgroundColor:"#e3f2fd"},children:Object(T.jsxs)("div",{className:"container-fluid",children:[Object(T.jsx)(o.b,{to:"/",children:Object(T.jsx)("img",{src:"https://i.pinimg.com/originals/77/0b/80/770b805d5c99c7931366c2e84e88f251.png",alt:"Weather-App",className:"logo"})}),Object(T.jsxs)("div",{className:"d-flex flex-row ",children:[Object(T.jsxs)("label",{className:"switch",children:[Object(T.jsx)("input",{type:"checkbox",onChange:function(e){return function(e){var a="F";e.target.checked&&(a="C"),t(a)}(e)}}),Object(T.jsx)("span",{className:"slider round"})]}),Object(T.jsx)(o.b,{to:"/",className:"p-2 link",children:"Home"}),Object(T.jsx)(o.b,{to:"/favorite",className:"btn btn-primary p-2 link link__btn  ",children:"Favorite"})]})]})})})),C=a(4),I=a(29),D=(a(78),function(e){var t=e.msg,a=e.setError,n=e.city,c=void 0===n?"":n;return Object(T.jsx)("div",{className:"modal__bg",children:Object(T.jsxs)("div",{className:"modal__card",children:[Object(T.jsx)("div",{className:"modal__title",children:Object(T.jsx)("h1",{children:"Error"})}),Object(T.jsx)("div",{className:"modal__body",children:Object(T.jsxs)("p",{children:[t,c,"."]})}),Object(T.jsx)("button",{className:"btn btn-danger",onClick:function(){a(null)},children:"Close"})]})})}),U=(a(26),{setSearchResults:function(e){return function(){var t=Object(m.a)(d.a.mark((function t(a){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,g.loadLocations(e);case 3:if("Error"!==(n=t.sent).name){t.next=6;break}throw n;case 6:return a({type:p,payload:n}),t.abrupt("return",n);case 10:throw t.prev=10,t.t0=t.catch(0),Error("Couldn't send search query to AccuWeather");case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()}}),A=Object(l.b)(null,U)((function(e){var t=e.onCitySubmit,a=e.setSearchResults,c=Object(n.useState)(""),r=Object(C.a)(c,2),i=r[0],o=r[1],s=Object(n.useState)([]),l=Object(C.a)(s,2),u=l[0],h=l[1],p=Object(n.useState)(),j=Object(C.a)(p,2),f=j[0],b=j[1],y=Object(n.useState)(!1),v=Object(C.a)(y,2),O=v[0],x=v[1],w=function(){var e=Object(m.a)(d.a.mark((function e(a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.preventDefault(),t(f);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(m.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.length>0)){e.next=5;break}return e.next=3,a(t).catch((function(e){x(e.message)}));case 3:n=e.sent,h(n);case 5:o(t);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(T.jsxs)("form",{onSubmit:w,autoComplete:"off",className:"d-flex flex-column container align-items-center mb-5",children:[O&&Object(T.jsx)(D,{msg:O,setError:x}),Object(T.jsxs)("div",{className:"form__input",children:[Object(T.jsx)("input",{className:"col-md-12 input form-control",type:"text",name:"name",placeholder:"Weather report at...",onChange:function(e){return N(e.target.value)},value:i,onBlur:function(){setTimeout((function(){h([])}),100)}}),Object(T.jsx)("div",{className:"col-md-12 justify-content-md-center list-group ",children:u&&u.map((function(e,t){return Object(T.jsxs)("div",{className:"list-group-item",onClick:function(){return o((t=e).LocalizedName),b(t),void h([]);var t},children:[e.LocalizedName," - ",e.Country.LocalizedName]},t)}))})]})]})})),z=a(42),E=a.n(z),K=Object(l.b)((function(e){return{tempUnit:e.root.tempUnit}}),null)((function(e){var t=e.day,a=e.flag,c=e.tempUnit,r=Object(n.useState)({}),i=Object(C.a)(r,2),o=i[0],s=i[1],l=new Date;return Object(n.useEffect)((function(){s(t)})),Object(T.jsx)("div",{className:"card bg-dark text-white text-center w-15",children:Object(T.jsxs)("div",{className:"card__text__holder",children:[Object(T.jsx)(E.a,{format:"dddd",children:l.setDate((new Date).getDate()+a)}),"F"===c?Object(T.jsxs)("div",{children:[o.K," \xb0F"]}):Object(T.jsxs)("div",{children:[o.C," \xb0C"]})]})})})),M=function(e){var t=e.forecast;return Object(T.jsx)("div",{className:"container pt-5 holder",children:t.map((function(e,t){return Object(T.jsx)(K,{day:e,flag:t+1},t)}))})},_=Object(l.b)((function(e){return{tempUnit:e.root.tempUnit}}),null)((function(e){var t=e.data,a=e.chosenCity,c=e.tempUnit,r=Object(n.useState)({}),i=Object(C.a)(r,2),s=i[0],l=i[1],u=a.Key,d=a.LocalizedName,m=t[0],h=m.Temperature,p=m.WeatherText;return Object(n.useEffect)((function(){l("F"===c?h.Imperial:h.Metric)})),Object(T.jsx)(o.b,{to:"/".concat(u),style:{textDecoration:"none"},children:Object(T.jsxs)("div",{className:"card bg-dark text-white text-center p-2 w-15",children:[Object(T.jsx)("h4",{className:"card-title",children:d}),Object(T.jsxs)("p",{className:"card-text",children:[s.Value," ",s.Unit]}),Object(T.jsx)("p",{className:"card-text",children:p})]})})})),F={setForecast:function(e){return function(){var t=Object(m.a)(d.a.mark((function t(a){var n,c,r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,g.loadForecast(e);case 3:if("Error"!==(n=t.sent).name){t.next=6;break}throw n;case 6:c=n.DailyForecasts,r=[],c.forEach((function(e){var t={};t.K=e.Temperature.Maximum.Value;var a=g.convertTempToCelsius(t.K);t.C=a.toFixed(0),r.push(t)})),a({type:h,payload:r}),t.next=15;break;case 12:throw t.prev=12,t.t0=t.catch(0),Error("Could't access AccuWeather and load forecast");case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e){return t.apply(this,arguments)}}()},setLikesOnLoad:function(){return function(e){try{var t=L();e({type:j,payload:t})}catch(a){console.log(a)}}},manageFavorites:function(e){return function(t){try{t({type:f,payload:e})}catch(a){console.log("Couldn't set like for location")}}}},P=Object(l.b)((function(e){return{forecast:e.root.forecast}}),F)((function(e){var t=e.forecast,a=e.setForecast,c=e.setLikesOnLoad,r=e.manageFavorites,i=e.match,o=Object(n.useState)({Key:"215854",LocalizedName:"Tel Aviv"}),s=Object(C.a)(o,2),l=s[0],u=s[1],h=Object(n.useState)(),p=Object(C.a)(h,2),j=p[0],f=p[1],b=Object(n.useState)(),y=Object(C.a)(b,2),v=y[0],O=y[1],x=Object(n.useState)(!1),w=Object(C.a)(x,2),N=w[0],L=w[1],S=Object(n.useState)(null),k=Object(C.a)(S,2),U=k[0],z=k[1],E=Object(n.useState)(null),K=Object(C.a)(E,2),F=K[0],P=K[1],V=function(){var e=Object(m.a)(d.a.mark((function e(t){var a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.Key,n=t.LocalizedName,u({Key:a,LocalizedName:n});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){if(i.params.id){var e=JSON.parse(localStorage.getItem("likes")).filter((function(e){return e.Key===i.params.id}));u(e[0])}}),[i]),Object(n.useEffect)((function(){if(null!==l){var e=!0;L(!0);var t=localStorage.getItem("likes");if(c(),f((function(){return null===t||void 0===t?void 0:t.includes(l.Key)})),e){var n=g.loadCurrentData(l.Key);O(n),P(null),a(l.Key).then((function(){return z(null)})).catch((function(e){L(!1),z(e.message)}))}return L(!1),function(){return e=!1}}}),[l,a]);var R=function(){r(l),f(!j)};return Object(T.jsxs)("div",{className:"container",children:[Object(T.jsx)(A,{onCitySubmit:V}),N&&Object(T.jsx)("div",{children:"Loading ..."}),Object(T.jsxs)("div",{children:[Object(T.jsxs)("h1",{className:"mb-5 text-center",children:["This is the weather for ",l.LocalizedName]}),Object(T.jsxs)("div",{className:"holder",children:[F&&Object(T.jsx)(D,{msg:F,setError:P,city:l.LocalizedName}),v&&Object(T.jsx)(_,{data:v,chosenCity:l}),Object(T.jsx)("div",{className:"d-flex align-items-center",children:j?Object(T.jsx)(I.a,{onClick:R,variant:"danger",children:"Remove Favorite"}):Object(T.jsx)(I.a,{onClick:R,variant:"success",children:"Add to Favorites"})})]}),U&&Object(T.jsx)(D,{msg:U,setError:z}),t&&Object(T.jsx)(M,{forecast:t})]})]})})),V=function(){var e=Object(n.useState)([]),t=Object(C.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)([]),i=Object(C.a)(r,2),o=i[0],s=i[1],l=Object(n.useState)(!1),u=Object(C.a)(l,2),d=(u[0],u[1]),m=Object(n.useState)(null),h=Object(C.a)(m,2),p=h[0],j=h[1];return Object(n.useEffect)((function(){var e=localStorage.getItem("likes");c(e?JSON.parse(e):[])}),[]),Object(n.useEffect)((function(){d(!0);var e=[];a.forEach((function(t){e.push(g.loadCurrentData(t.Key))})),Promise.all(e).then((function(e){s(e)})).catch((function(e){j("Couldn't get details for your favorite locations")})),d(!1)}),[a]),Object(T.jsxs)("div",{className:"fav__list__holder m-5",children:[p&&Object(T.jsx)(D,{msg:p,setError:j}),Object(T.jsx)("div",{className:"fav__title mb-5",children:Object(T.jsx)("h1",{children:"Your favorite locations"})}),o.length>0&&Object(T.jsx)("div",{className:"grid__holder",children:a.map((function(e,t){return Object(T.jsx)(_,{data:o[t],chosenCity:e},t)}))}),0===o.length&&Object(T.jsx)("h1",{className:"text-center",children:"Select locations on home page and add them to favorites"})]})},R=a(19),H=a(43),W=a(44),J=a(11),B={forecast:null,searchResults:[],favorites:[],tempUnit:"F"};var G=Object(R.combineReducers)({root:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case h:return Object(J.a)(Object(J.a)({},e),{},{forecast:n});case p:return Object(J.a)(Object(J.a)({},e),{},{searchResults:Object(y.a)(n)});case j:return Object(J.a)(Object(J.a)({},e),{},{favorites:n});case f:for(var c in e.favorites)if(e.favorites[c].Key===n.Key){var r=e.favorites.filter((function(e){return e.Key!==n.Key}));return localStorage.setItem("likes",JSON.stringify(r)),Object(J.a)(Object(J.a)({},e),{},{favorites:r})}var i=[].concat(Object(y.a)(e.favorites),[n]);return localStorage.setItem("likes",JSON.stringify(i)),Object(J.a)(Object(J.a)({},e),{},{favorites:[].concat(Object(y.a)(e.favorites),[n])});case b:return Object(J.a)(Object(J.a)({},e),{},{tempUnit:n});default:return e}}}),q=Object(R.createStore)(G,Object(H.composeWithDevTools)(Object(R.applyMiddleware)(W.a)));var Y=function(){return Object(T.jsx)(l.a,{store:q,children:Object(T.jsxs)(o.a,{children:[Object(T.jsx)(k,{}),Object(T.jsxs)(s.c,{children:[Object(T.jsx)(s.a,{exact:!0,path:"/",component:P}),Object(T.jsx)(s.a,{exact:!0,path:"/favorite",component:V}),Object(T.jsx)(s.a,{exact:!0,path:"/:id",component:P})]})]})})};i.a.render(Object(T.jsx)(c.a.StrictMode,{children:Object(T.jsx)(Y,{})}),document.getElementById("root"))}},[[81,1,2]]]);
//# sourceMappingURL=main.6c62bd9b.chunk.js.map